{% extends 'base.html' %}

{% load humanize %}
{% load burst_tags %}

{% block content %}

  <h5>Block #{{ blk.height }} details</h5>

  <table class="table small table-sm">
    <tbody>
    <tr>
      <th>Block Height</th>
      <td>
        <div class="d-flex flex-column flex-md-row align-items-center">
          <span class="my-0">{{ blk.height }}</span>&nbsp;&nbsp;
          <nav aria-label="Block navigation">
            <ul class="pagination">
              {% if blk.previous_block %}
                <li class="page-item"><a class="page-link" href="{% url 'block-detail' blk.previous_block.height %}">Previous</a></li>
              {% else %}
                <li class="page-item disabled"><a class="page-link" href="#">Previous</a></li>
              {% endif %}
              {% if blk.next_block %}
                <li class="page-item"><a class="page-link" href="{% url 'block-detail' blk.next_block.height %}">Next</a></li>
              {% else %}
                <li class="page-item disabled"><a class="page-link" href="#">Next</a></li>
              {% endif %}
            </ul>
          </nav>
        </div>
      </td>
    </tr>
    <tr>
      <th>Timestamp</th>
      <td>{{ blk.timestamp|naturaltime }} ({{ blk.timestamp|date:'Y-m-d H:i:s' }} UTC)</td>
    </tr>
    <tr>
      <th>Transactions</th>
      <td><a href="{% url 'txs' %}?block={{ blk.height }}">{{ txs_cnt|intcomma }} transactions</a> and ... in this block</td>
    </tr>
    <tr>
      <th>Total Amount</th>
      <td>{{ blk.total_amount|burst_amount|intcomma }} Burst</td>
    </tr>
    <tr>
      <th>Mined by</th>
      <td>
        {% include "account_link.html" with account_id=blk.generator_id account_name=generator_name oneline=True %}
      </td>
    </tr>
    <tr>
      <th>Pool</th>
      <td>
      </td>
    </tr>
    <tr>
      <th>Block Generation time</th>
      <td>{% block_generation_time blk %}</td>
    </tr>
    <tr>
      <th>Block Reward</th>
      <td>{{ blk|block_reward_fee|intcomma }} Burst ({{ blk|block_reward }} + {{ blk.total_fee|burst_amount|intcomma }})</td>
    </tr>
    <tr>
      <th>Size</th>
      <td>{{ blk.payload_length|filesizeformat }}</td>
    </tr>
    <tr><td colspan="2"><br><br></td></tr>
    <tr>
      <th>Base Target</th>
      <td>{{ blk.base_target }}</td>
    </tr>
    <tr>
      <th>Version</th>
      <td>{{ blk.version }}</td>
    </tr>
    <tr>
      <th>Nonce</th>
      <td>{{ blk.nonce }}</td>
    </tr>
    <tr>
      <th>ATs</th>
      <td>{{ blk.ats|bin2hex }}</td>
    </tr>
    <tr>
      <th>Cumulative Difficulty</th>
      <td>{{ blk.cumulative_difficulty|bin2hex }}</td>
    </tr>
    <tr>
      <th class="text-nowrap">Generator Public Key</th>
      <td>{{ blk.generator_public_key|bin2hex }}</td>
    </tr>
    <tr>
      <th>Generation Signature</th>
      <td>{{ blk.generation_signature|bin2hex }}</td>
    </tr>
    <tr>
      <th>Block Signature</th>
      <td>{{ blk.block_signature|bin2hex }}</td>
    </tr>
    </tbody>
  </table>
{% endblock %}
